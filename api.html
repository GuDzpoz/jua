<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lua API | LuaJava</title>
    <meta name="description" content="Lua for Java">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/luajava/assets/style.D2G7xVPe.css" as="style">
    
    <script type="module" src="/luajava/assets/app.v9SjqGWW.js"></script>
    <link rel="preload" href="/luajava/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/luajava/assets/chunks/theme.CoS0yamM.js">
    <link rel="modulepreload" href="/luajava/assets/chunks/framework.SYT71_kc.js">
    <link rel="modulepreload" href="/luajava/assets/api.md.mLsfca0G.lean.js">
    <link rel="icon" href="/luajava/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <script>import("/luajava/pagefind/pagefind.js").then(i=>{window.__pagefind__=i,i.init()}).catch(()=>{});</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8e9cbc5e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-f79ced2b></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-f79ced2b> Skip to content </a><!--]--><!----><header class="VPNav" data-v-8e9cbc5e data-v-5744364a><div class="VPNavBar has-sidebar top" data-v-5744364a data-v-e9bd5be0><div class="wrapper" data-v-e9bd5be0><div class="container" data-v-e9bd5be0><div class="title" data-v-e9bd5be0><div class="VPNavBarTitle has-sidebar" data-v-e9bd5be0 data-v-33072f5b><a class="title" href="/luajava/" data-v-33072f5b><!--[--><!--]--><!--[--><img class="VPImage logo" src="/luajava/lua-java.svg" alt data-v-d38edb12><!--]--><span data-v-33072f5b>LuaJava</span><!--[--><!--]--></a></div></div><div class="content" data-v-e9bd5be0><div class="content-body" data-v-e9bd5be0><!--[--><!--]--><div class="blog-search search" data-pagefind-ignore="all" data-v-e9bd5be0 data-v-e99993b2><div class="nav-search-btn-wait" data-v-e99993b2><span data-v-e99993b2><svg width="14" height="14" viewBox="0 0 20 20" data-v-e99993b2><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" data-v-e99993b2></path></svg></span><span class="search-tip" data-v-e99993b2>Search</span><span class="metaKey" data-v-e99993b2> K </span></div><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e9bd5be0 data-v-9494e79a><span id="main-nav-aria-label" class="visually-hidden" data-v-9494e79a> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/luajava/" tabindex="0" data-v-9494e79a data-v-50306d3d><!--[--><span data-v-50306d3d>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/luajava/javadoc/index.html" target="_self" tabindex="0" data-v-9494e79a data-v-50306d3d><!--[--><span data-v-50306d3d>Javadoc</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.lua.org" target="_blank" rel="noreferrer" tabindex="0" data-v-9494e79a data-v-50306d3d><!--[--><span data-v-50306d3d>Lua</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://luajit.org/luajit.html" target="_blank" rel="noreferrer" tabindex="0" data-v-9494e79a data-v-50306d3d><!--[--><span data-v-50306d3d>LuaJIT</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-e9bd5be0 data-v-8f405c1b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8f405c1b data-v-f8fb0e32 data-v-a22e1b37><span class="check" data-v-a22e1b37><span class="icon" data-v-a22e1b37><!--[--><span class="vpi-sun sun" data-v-f8fb0e32></span><span class="vpi-moon moon" data-v-f8fb0e32></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e9bd5be0 data-v-1af1a6e8 data-v-9cdf3b04><!--[--><a class="VPSocialLink no-icon" href="https://github.com/gudzpoz/luajava" aria-label="github" target="_blank" rel="noopener" data-v-9cdf3b04 data-v-73adc9e1><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e9bd5be0 data-v-482fb46f data-v-1ee2e6bd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1ee2e6bd><span class="vpi-more-horizontal icon" data-v-1ee2e6bd></span></button><div class="menu" data-v-1ee2e6bd><div class="VPMenu" data-v-1ee2e6bd data-v-e49d48b5><!----><!--[--><!--[--><!----><div class="group" data-v-482fb46f><div class="item appearance" data-v-482fb46f><p class="label" data-v-482fb46f>Appearance</p><div class="appearance-action" data-v-482fb46f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-482fb46f data-v-f8fb0e32 data-v-a22e1b37><span class="check" data-v-a22e1b37><span class="icon" data-v-a22e1b37><!--[--><span class="vpi-sun sun" data-v-f8fb0e32></span><span class="vpi-moon moon" data-v-f8fb0e32></span><!--]--></span></span></button></div></div></div><div class="group" data-v-482fb46f><div class="item social-links" data-v-482fb46f><div class="VPSocialLinks social-links-list" data-v-482fb46f data-v-9cdf3b04><!--[--><a class="VPSocialLink no-icon" href="https://github.com/gudzpoz/luajava" aria-label="github" target="_blank" rel="noopener" data-v-9cdf3b04 data-v-73adc9e1><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e9bd5be0 data-v-d0303a12><span class="container" data-v-d0303a12><span class="top" data-v-d0303a12></span><span class="middle" data-v-d0303a12></span><span class="bottom" data-v-d0303a12></span></span></button></div></div></div></div><div class="divider" data-v-e9bd5be0><div class="divider-line" data-v-e9bd5be0></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8e9cbc5e data-v-f59e9ded><div class="container" data-v-f59e9ded><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f59e9ded><span class="vpi-align-left menu-icon" data-v-f59e9ded></span><span class="menu-text" data-v-f59e9ded>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f59e9ded data-v-df903465><button data-v-df903465>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-8e9cbc5e data-v-c662bfd5><div class="curtain" data-v-c662bfd5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c662bfd5><span class="visually-hidden" id="sidebar-aria-label" data-v-c662bfd5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-fd4278d1><section class="VPSidebarItem level-0" data-v-fd4278d1 data-v-4882b8b2><div class="item" role="button" tabindex="0" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><h2 class="text" data-v-4882b8b2>Introduction</h2><!----></div><div class="items" data-v-4882b8b2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/index.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>What is LuaJava?</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/getting-started.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/console.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Interactive Console</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/jsr223.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>JSR 223</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/jpms.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Java 9 Platform Module System</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fd4278d1><section class="VPSidebarItem level-0" data-v-fd4278d1 data-v-4882b8b2><div class="item" role="button" tabindex="0" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><h2 class="text" data-v-4882b8b2>Java API</h2><!----></div><div class="items" data-v-4882b8b2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/java.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Java API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/c-api.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Lua Stack-based C API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fd4278d1><section class="VPSidebarItem level-0 has-active" data-v-fd4278d1 data-v-4882b8b2><div class="item" role="button" tabindex="0" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><h2 class="text" data-v-4882b8b2>Lua API</h2><!----></div><div class="items" data-v-4882b8b2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/api.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Lua API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/conversions.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Type Conversions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/proxy.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Proxy Caveats</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/threadsafety.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Thread Safety</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fd4278d1><section class="VPSidebarItem level-0" data-v-fd4278d1 data-v-4882b8b2><div class="item" role="button" tabindex="0" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><h2 class="text" data-v-4882b8b2>Examples</h2><!----></div><div class="items" data-v-4882b8b2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/examples/compat.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>LuaJava API Compatibility</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/examples/hello-world.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Hello World</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/examples/hello-world-mod.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Advanced Hello World</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/examples/awt.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>AWT Example</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/examples/modules.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Java-Side Modules</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-fd4278d1><section class="VPSidebarItem level-0" data-v-fd4278d1 data-v-4882b8b2><div class="item" role="button" tabindex="0" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><h2 class="text" data-v-4882b8b2>Troubleshooting</h2><!----></div><div class="items" data-v-4882b8b2><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/troubleshooting.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Troubleshooting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/rtld.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>Using Binary Lua Libraries</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4882b8b2 data-v-4882b8b2><div class="item" data-v-4882b8b2><div class="indicator" data-v-4882b8b2></div><a class="VPLink link link" href="/luajava/glibc.html" data-v-4882b8b2><!--[--><p class="text" data-v-4882b8b2>GNU C Library (glibc) Compatibility</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8e9cbc5e data-v-c8bed030><div class="VPDoc has-sidebar has-aside" data-v-c8bed030 data-v-87e45d9f><!--[--><!--]--><div class="container" data-v-87e45d9f><div class="aside" data-v-87e45d9f><div class="aside-curtain" data-v-87e45d9f></div><div class="aside-container" data-v-87e45d9f><div class="aside-content" data-v-87e45d9f><div class="VPDocAside" data-v-87e45d9f data-v-1b06d745><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-1b06d745 data-v-a4f10787><div class="content" data-v-a4f10787><div class="outline-marker" data-v-a4f10787></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a4f10787>On this page</div><ul class="VPDocOutlineItem root" data-v-a4f10787 data-v-522a08e4><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-1b06d745></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-87e45d9f><div class="content-container" data-v-87e45d9f><!--[--><!--]--><main class="main" data-v-87e45d9f><div style="position:relative;" class="vp-doc _luajava_api external-link-icon-enabled" data-v-87e45d9f><div data-pagefind-body="true"><h1 id="lua-api" tabindex="-1">Lua API <a class="header-anchor" href="#lua-api" aria-label="Permalink to &quot;Lua API&quot;">​</a></h1><h2 id="extra-lua-types" tabindex="-1">Extra Lua Types <a class="header-anchor" href="#extra-lua-types" aria-label="Permalink to &quot;Extra Lua Types&quot;">​</a></h2><p>We provide three extra <code>userdata</code> types that correspond to three Java concepts. We use their abbreviations in the following documentation.</p><table tabindex="0"><thead><tr><th></th><th style="text-align:center;"><a href="#jclass-type">Java classes</a></th><th style="text-align:center;"><a href="#jobject-type">Java objects</a></th><th style="text-align:left;"><a href="#jarray-type">Java arrays</a></th></tr></thead><tbody><tr><td>Abbreviation</td><td style="text-align:center;"><a href="#jclass-type"><code>jclass</code></a></td><td style="text-align:center;"><a href="#jobject-type"><code>jobject</code></a></td><td style="text-align:left;"><a href="#jarray-type"><code>jarray</code></a></td></tr></tbody></table><h3 id="jclass-type" tabindex="-1"><code>jclass</code> <span class="VPBadge tip"><!--[-->type<!--]--></span> <a class="header-anchor" href="#jclass-type" aria-label="Permalink to &quot;`jclass` &lt;Badge&gt;type&lt;/Badge&gt;&quot;">​</a></h3><p>For a <code>jclass</code> <code>clazz</code>:</p><ul><li><code>clazz.memberVar</code> performs the following in sequence: <ol><li>It looks for a field named <code>memberVar</code>. It returns the public static member if it finds it. <ul><li>If you have an inner class also named <code>memberVar</code>, you will have to manually <code>java.import</code> it.</li></ul></li><li>It then looks for an inner class named <code>memberVar</code>, and returns that if it is available. <ul><li>If you have a method also named <code>memberVar</code>, you need to use <code>java.method</code> to look that up.</li></ul></li><li>Otherwise, it prepares for a method call. See <code>clazz:memberMethod(...)</code> below.</li></ol></li><li><code>clazz.memberVar = value</code> assigns to the public static member. If exceptions occur, a Lua error is generated.</li><li><code>clazz:memberMethod(...)</code> calls the public static member method <code>memberMethod</code>. See <a href="#proxied-method-calls">Proxied Method Calls</a> for more info.</li><li><code>clazz(...)</code>: <ul><li>For an interface, this expects a table as the parameter and creates a proxy for it. See <a href="#proxy-jclass-table-function"><code>java.proxy</code></a>.</li><li>Otherwise, it calls the corresponding constructor. See <a href="#new-jclass-function"><code>java.new</code></a>.</li></ul></li><li><code>clazz.class</code> returns a <code>jobject</code>, wrapping an instance of <code>java.lang.Class&lt;clazz&gt;</code>.</li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Integer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Accessing a static member</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calling a static method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1024&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Construct an instance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1024&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Get a Class&lt;Integer&gt; instance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Don&#39;t confuse <code>jclass</code> with an instance of <code>java.lang.Class&lt;?&gt;</code>. The former one corresponds to Java classes, i.e., <code>java.lang.String</code> in Java. The latter one is just a <code>jobject</code>, i.e., <code>java.lang.String.class</code> in Java.</p></div><h3 id="jobject-type" tabindex="-1"><code>jobject</code> <span class="VPBadge tip"><!--[-->type<!--]--></span> <a class="header-anchor" href="#jobject-type" aria-label="Permalink to &quot;`jobject` &lt;Badge&gt;type&lt;/badge&gt;&quot;">​</a></h3><p>For a <code>jobject</code> <code>object</code>:</p><ul><li><code>object.memberVar</code> returns the public member named <code>memberVar</code>.</li><li><code>object.memberVar = value</code> assigns to the public static member. If exceptions occur, a Lua error is generated.</li><li><code>object:memberMethod(...)</code> calls the public member method <code>memberMethod</code>. See <a href="#proxied-method-calls">Proxied Method Calls</a> for more info.</li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Integer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calling a method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="jarray-type" tabindex="-1"><code>jarray</code> <span class="VPBadge tip"><!--[-->type<!--]--></span> <a class="header-anchor" href="#jarray-type" aria-label="Permalink to &quot;`jarray` &lt;Badge&gt;type&lt;/Badge&gt;&quot;">​</a></h3><p>For a <code>jarray</code> <code>array</code>:</p><ul><li><code>array[i]</code> returns <code>array[i - 1]</code>. Unlike Lua tables, we raise Lua errors if the index goes out of bounds.</li><li><code>array[i] = value</code> assigns to <code>array[i - 1]</code>. If exceptions occur, a Lua error is generated.</li><li><code>array:memberMethod(...)</code> calls the public member method <code>memberMethod</code> (of <code>java.lang.Object</code> of course), for example, <code>array:getClass()</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Lua tables usually start the index from 1, while Java arrays from 0.</p></div><h2 id="java-module" tabindex="-1"><code>java</code> <span class="VPBadge tip"><!--[-->module<!--]--></span> <a class="header-anchor" href="#java-module" aria-label="Permalink to &quot;`java` &lt;Badge&gt;module&lt;/Badge&gt;&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Functions</th><th>Signature</th><th>Returns</th><th>Description</th></tr></thead><tbody><tr><td><strong><code>array</code></strong></td><td><code>(jclass, dim1, ...)</code></td><td><code>jarray</code></td><td>Create an array with specified dimensions</td></tr><tr><td><strong><code>caught</code></strong></td><td><code>()</code></td><td><code>jobject</code></td><td>Return the latest captured Java <code>Throwable</code></td></tr><tr><td><strong><code>detach</code></strong></td><td><code>(thread)</code></td><td><code>nil</code></td><td>Detach the sub-thread from registry to allow for GC</td></tr><tr><td><strong><code>import</code></strong></td><td><code>(string)</code></td><td><code>jclass | table</code></td><td>Import a Java class or package</td></tr><tr><td><strong><code>loadlib</code></strong></td><td><code>(string, string)</code></td><td><code>function</code></td><td>Load a Java method, similar to <code>package.loadlib</code></td></tr><tr><td><strong><code>luaify</code></strong></td><td><code>(jobject)</code></td><td><code>any</code></td><td>Convert an object to Lua types if possible</td></tr><tr><td><strong><code>method</code></strong></td><td><code>(jobject, string, string)</code></td><td><code>function</code></td><td>Find a method</td></tr><tr><td><strong><code>new</code></strong></td><td><code>(jclass, ...)</code></td><td><code>jobject</code></td><td>Call the constructor of the given Java type</td></tr><tr><td><strong><code>proxy</code></strong></td><td><code>(string, ..., table)</code></td><td><code>jobject</code></td><td>Create an object with all calls proxied to a Lua table</td></tr><tr><td><strong><code>unwrap</code></strong></td><td><code>(jobject)</code></td><td><code>table</code></td><td>Return the backing table of a proxy object</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">There&#39;s more!</p><p>Actually, if you load the built-in <code>package</code> library (either by <code>Lua#openLibraries()</code> or <code>Lua#openLibrary(&quot;package&quot;)</code>), you can use the Lua <code>require</code> functions to load Java side things.</p><p>See <a href="./examples/modules.html">Java-Side Modules</a> for a brief introduction.</p></div><h3 id="array-jclass-dim1-function" tabindex="-1"><code>array (jclass, dim1, ...)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#array-jclass-dim1-function" aria-label="Permalink to &quot;`array (jclass, dim1, ...)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Creates a Java array.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass</code>: (<em><strong>jclass</strong></em> | <em><strong>jobject</strong></em>) The component type. One may pass a <code>jclass</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>dim1</code>: (<em><strong>number</strong></em>) The size of the first dimension.</p></li><li><p><code>dim2</code>: (optional) (<em><strong>number</strong></em>) The size of the second dimension.</p></li><li><p><code>dimN</code>: (optional) (<em><strong>number</strong></em>) The size of the N-th dimension.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jarray</strong></em>) <code>new &quot;jclass&quot;[dim1][dim2]...[dimN]</code></li></ul></li><li><p>Generates a Lua error if types mismatch or some dimensions are negative.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">int </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(int, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="caught-function" tabindex="-1"><code>caught ()</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#caught-function" aria-label="Permalink to &quot;`caught ()` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Return the latest captured Java <code>java.lang.Throwable</code> during a Java method call.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><em><strong>none</strong></em></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>jobject</strong></em>) If some recent Java method call threw a <code>java.lang.Throwable</code>.</p></li><li><p>(<em><strong>nil</strong></em>) No <code>Throwable</code> was thrown, or they were cleared.</p></li></ul></li></ul><h3 id="detach-thread-function" tabindex="-1"><code>detach (thread)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#detach-thread-function" aria-label="Permalink to &quot;`detach (thread)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Detach the sub-thread from registry to allow for GC.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><em><strong>thread</strong></em> The thread (e.g., a return value of <code>coroutine.create</code>)</li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>nil</strong></em>)</li></ul></li><li><p>Generates a Lua error if the thread is a main thread.</p></li></ul><div class="danger custom-block"><p class="custom-block-title">Check before detaching</p><ol><li>Most often, you only want to use <code>java.detach</code> on threads created on the Lua side.</li><li>You need to ensure that proxies created on that thread is no longer used.</li><li>If you are not creating tons of sub-threads, you can worry less about GC by letting <code>mainThread#close</code> handle it all instead of manually <code>detach</code>ing.</li></ol></div><details class="details custom-block"><summary>Thread interface explained</summary><p>In LuaJava, an <code>AbstractLua</code> instance just wraps around a <code>lua_State *</code>. We ensure that one <code>lua_State *</code> maps to no more than one <code>AbstractLua</code> instance by assigning each state an ID when:</p><ol><li>a main state is created;</li><li>or when a sub-thread is created on the Java side (with <code>Lua#newThread</code>);</li><li>or when a sub-thread, created on the Lua side (with <code>coroutine.create</code>), eventually requests for an ID if it finds it necessary.</li></ol><p>IDs are stored both on:</p><ul><li>the Java side: IDs are stored in <code>AbstractLua</code> instances.</li><li>and the Lua side: IDs are stored in the table at <code>LUA_REGISTRYINDEX</code>, <em>with the thread itself as the key</em>.</li></ul><p>However, since we keep references to the thread in the <code>LUA_REGISTRYINDEX</code>, it prevents the thread from garbage collection (which is intentional though, as you need threads alive for proxies).</p><p>If you are sure that neither the Java side (proxies, Java API, etc.) nor the Lua side uses the thread anymore, you may manually call <code>java.detach</code> or <code>Lua#close</code> to free the thread from the global registry.</p></details><h3 id="import-name-function" tabindex="-1"><code>import (name)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#import-name-function" aria-label="Permalink to &quot;`import (name)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Import a Java class or package.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>name</code>: (<em><strong>string</strong></em>) Either of the following <ul><li><p>The full name, including the package part, of the class.</p></li><li><p>Any string, appended with possibly multiple <code>.*</code>.</p></li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>jclass</strong></em>) If <code>name</code> is the name of a class, return a <code>jclass</code> of the class.</p></li><li><p>(<em><strong>table</strong></em>) If <code>name</code> is a string appended with <code>.*</code>, return a Lua table, which looks up classes directly under a package or inner classes inside a class when indexed. See the following example for details.</p></li></ul></li><li><p>Generates a Lua error if class not found.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lang </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;android.R.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.*.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(j.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Both works</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(j.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.System&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="loadlib-classname-method-function" tabindex="-1"><code>loadlib (classname, method)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#loadlib-classname-method-function" aria-label="Permalink to &quot;`loadlib (classname, method)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>This function provides similar functionalities to Lua&#39;s <code>loadlib</code>. It looks for a method <code>static public int yourSuppliedMethodName(Lua L);</code> inside the class, and returns it as a C function.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>classname</code>: (<em><strong>string</strong></em>) The class name.</p></li><li><p><code>method</code>: (<em><strong>string</strong></em>) The method name.</p><ul><li>We expect the method to accept a single <code>Lua</code> parameter and return an integer.</li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>function</strong></em>) If the method is found, we wrap it up with a C function wrapper and return it.</p></li><li><p>(<em><strong>nil</strong></em>, <em><strong>string</strong></em>) If no valid method is found, we return <code>nil</code> plus a error message. Similar to <code>package.loadlib</code>, we do not generate a Lua error in this case.</p></li></ul></li></ul><p>You might also want to check out <a href="./examples/modules.html">Java-Side Modules</a> to see how we use this function to extend the Lua <code>require</code>.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-rI1CA" id="tab-kiAiuyO" checked><label for="tab-kiAiuyO">Java Library</label><input type="radio" name="group-rI1CA" id="tab-CCNu_5H"><label for="tab-CCNu_5H">Java Side</label><input type="radio" name="group-rI1CA" id="tab-gSAvMLV"><label for="tab-gSAvMLV">Lua Side</label></div><div class="blocks"><div class="language-java vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> party.iroiro.luajava.docs;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> party.iroiro.luajava.Lua;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SuppressWarnings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unused&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JavaSideExampleModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Lua </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getNumber&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Lua L </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Lua51</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local LuaLib = require(&#39;party.iroiro.luajava.docs.JavaSideExampleModule.open&#39;);&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;assert(1024 == LuaLib.getNumber())&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LuaLibOpen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">loadlib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;party.iroiro.luajava.docs.JavaSideExampleModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;open&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LuaLibOpen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div><h3 id="luaify-jobject-function" tabindex="-1"><code>luaify (jobject)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#luaify-jobject-function" aria-label="Permalink to &quot;`luaify (jobject)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Converts a Java object into its Lua equivalence. It does a <a href="./conversions.html#java-to-lua"><code>FULL</code> conversion</a>. See <a href="./conversions.html">Type Conversions</a> for more information.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>jobject</code>: (<em><strong>jobject</strong></em>) The object to get converted.</li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>boolean</strong></em> | <em><strong>integer</strong></em> | <em><strong>number</strong></em> | <em><strong>table</strong></em> | <em><strong>jclass</strong></em>) Depending on the Java type of <code>jobject</code>. <ul><li>Notably, it converts <code>Map&lt;?, ?&gt;</code> and <code>Collection&lt;?&gt;</code> to Lua tables, and <code>Class&lt;?&gt;</code> to <code>jclass</code>.</li></ul></li></ul></li></ul><h3 id="method-jobject-method-signature-function" tabindex="-1"><code>method (jobject, method[, signature])</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#method-jobject-method-signature-function" aria-label="Permalink to &quot;`method (jobject, method[, signature])` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Finds a method of the <code>jobject</code> or <code>jclass</code> matching the name and signature. See <a href="#method-resolution">Method Resolution</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jobject</code>: (<em><strong>jobject</strong></em> | <em><strong>jclass</strong></em>) The object.</p></li><li><p><code>method</code>: (<em><strong>string</strong></em>) The method name. Use <code>new</code> to refer to the constructor.</p><p>For proxy object, it is possible to explicitly call the default methods in the interfaces. Use <code>complete.interface.name:methodName</code> to refer to the method. See the examples below.</p></li><li><p><code>signature</code>: (optional) (<em><strong>string</strong></em>) Comma separated argument type list. If not supplied, treated as an empty one.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>function</strong></em>) Never <code>nil</code>. The real method lookup begins after you supply arguments to this returned function.</li></ul></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AtomicInteger </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.concurrent.atomic.AtomicInteger&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Constructor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AtomicInteger, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;new&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">compareAndSet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integer, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;compareAndSet&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int,int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compareAndSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compareAndSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  remove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- iter:remove() -- This throws an exception</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="new-jclass-function" tabindex="-1"><code>new (jclass, ...)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#new-jclass-function" aria-label="Permalink to &quot;`new (jclass, ...)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Call the constructor of the given Java type.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass</code>: (<em><strong>jclass</strong></em> | <em><strong>jobject</strong></em>) The class. One may pass a <code>jclass</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>...</code>: (<em><strong>any</strong></em>) Extra parameters are passed to the constructor. See also <a href="./conversions.html">Type Conversions</a> to find out how we locate a matching method.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The created object.</li></ul></li><li><p>Generates a Lua error if exceptions occur or unable to locate a matching constructor.</p></li></ul><p>Examples:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--         new String   (&quot;This is the content of the String&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String,   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;This is the content of the String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;This is the content of the String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="proxy-jclass-table-function" tabindex="-1"><code>proxy (jclass, ..., table)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#proxy-jclass-table-function" aria-label="Permalink to &quot;`proxy (jclass, ..., table)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Creates a Java object implementing the specified interfaces, proxying calls to the underlying Lua table. See also <a href="./proxy.html">Proxy Caveats</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass1</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The first interface. One may pass a <code>jclass</code> or a <code>string</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>jclass2</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The second interface.</p></li><li><p><code>jclassN</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The N-th interface.</p></li><li><p><code>table</code>: (<em><strong>table</strong></em> | <em><strong>function</strong></em>)</p><ul><li><p>This parameter can be a table implementing the all the methods in the interfaces.</p></li><li><p>Or, if the interfaces sum up to a <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8" target="_blank" rel="noreferrer">functional interface</a> of wider sense (that is, we allow different signatures as long as they share the same name), an intermediate table will be created and back the actual proxy automatically.</p></li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The created object.</li></ul></li><li><p>Generates a Lua error if exceptions occur or unable to find the interfaces.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.awt.Button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Execute&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">actionPerformed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ev)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- do something</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buttonProxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.awt.ActionListener&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addActionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buttonProxy)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="unwrap-jobject-function" tabindex="-1"><code>unwrap (jobject)</code> <span class="VPBadge tip"><!--[-->function<!--]--></span> <a class="header-anchor" href="#unwrap-jobject-function" aria-label="Permalink to &quot;`unwrap (jobject)` &lt;Badge&gt;function&lt;/Badge&gt;&quot;">​</a></h3><p>Return the backing table of a proxy object. See also <a href="./proxy.html">Proxy Caveats</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>jobject</code>: (<em><strong>jobject</strong></em>) The proxy object created with <a href="#proxy-jclass-table-function"><code>java.proxy</code></a> or <a href="./javadoc/party/iroiro/luajava/Lua.html#createProxy(java.lang.Class%5B%5D,party.iroiro.luajava.Lua.Conversion)" target="_self"><code>party.iroiro.luajava.Lua#createProxy</code></a></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The backing Lua table of the Lua proxy.</li></ul></li><li><p>Generates a Lua error if the object is not a Lua proxy object, or belongs to another irrelevant Lua state.</p></li></ul><h2 id="proxied-method-calls" tabindex="-1">Proxied Method Calls <a class="header-anchor" href="#proxied-method-calls" aria-label="Permalink to &quot;Proxied Method Calls&quot;">​</a></h2><p>Java allows method overloading, which means we cannot know which method you are calling until you supply the parameters. Method finding and parameter supplying is an integrated (or, as one may call it, atomic) process in Java.</p><p>However, for calls in Lua, the two steps can get separated:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(param1)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- The above is actually:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, param1)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>To proxy calls to Java, we treat all missing fields, such as <code>obj.method</code>, <code>obj.notAField</code>, <code>obj.whatever</code> as a possible method call. The real resolution starts only after you supply the parameters.</p><p>The side effect of this is that a missing field is never <code>nil</code> but always a possible <code>function</code> call, so don&#39;t depend on this.</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jobject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notAField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;function&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="method-resolution" tabindex="-1">Method resolution <a class="header-anchor" href="#method-resolution" aria-label="Permalink to &quot;Method resolution&quot;">​</a></h3><p>In either case, if no method matches, a Lua error is raised.</p><h4 id="with-jobject-method" tabindex="-1">With <code>jobject:method(...)</code> <a class="header-anchor" href="#with-jobject-method" aria-label="Permalink to &quot;With `jobject:method(...)`&quot;">​</a></h4><p>For method resolution, see <a href="./conversions.html#lua-to-java">Type Conversions</a>.</p><p>Since a Lua type maps to different Java types (for example, <code>lua_Number</code> may be mapped to any Java numerical type), we have to iterate through every method to find one matching Lua parameters. For each possible method, we try to convert the values on stack from Lua to Java. If such conversion is possible, the call is then proxied to this method and the remaining methods are never tried.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>By the nature of this procedure, we do not prioritize any of the method.</p><p>For example, if you are calling <code>java.lang.Math.max</code>, which can be <code>Math.max(int, int)</code>, <code>Math.max(double, double)</code>, etc., then nobody knows which will ever get called.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>We do not support varargs. You will need to combine <code>java.method</code> and <code>java.array</code> to make that happen.</p><p>For <code>Object... object</code> however, things are easier:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- We automatically convert lua tables into Object[]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&gt;&gt;&gt; %s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39; </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&gt;&gt;&gt; content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h4 id="with-java-method" tabindex="-1">With <code>java.method</code> <a class="header-anchor" href="#with-java-method" aria-label="Permalink to &quot;With `java.method`&quot;">​</a></h4><p>To help with precisely calling a specific method, we provide <a href="#method-jobject-method-signature-function"><code>java.method</code></a>, to which you may specify the signature of the method that you intend to call.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Take the above <code>java.lang.Math.max</code> as an example. You may call <code>Math.max(int, int)</code> with the following:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;max&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int,int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You may call <code>Math.max(double, double)</code> with the following:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;max&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;double,double&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><p>If you would like to access an overridden default method from a proxy object, you may also use:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calls the default method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iter1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- What if we want to access the default method from a overridden one?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iterImpl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hasNext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  remove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- Calls the default method from java.util.Iterator.</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- Equivalent to the following in Java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    --     Iterator.super.remove();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iterImpl)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calls the implemented `remove`, which then calls the default one</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Or explicitly calling `remove`</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Calling default methods is not available with LuaJ bindings, since the Java reflection does not provide a way to do so. (We use JNI functions to achieve this within binary bindings.)</p></div></div></div></main><footer class="VPDocFooter" data-v-87e45d9f data-v-7056a291><!--[--><!--]--><div class="edit-info" data-v-7056a291><div class="edit-link" data-v-7056a291><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/gudzpoz/luajava/blob/main/docs/api.md" target="_blank" rel="noreferrer" data-v-7056a291><!--[--><span class="vpi-square-pen edit-link-icon" data-v-7056a291></span> Edit this page<!--]--></a></div><div class="last-updated" data-v-7056a291><p class="VPLastUpdated" data-v-7056a291 data-v-395972d6>Last updated: <time datetime="2024-08-28T13:59:21.000Z" data-v-395972d6></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-7056a291><span class="visually-hidden" id="doc-footer-aria-label" data-v-7056a291>Pager</span><div class="pager" data-v-7056a291><a class="VPLink link pager-link prev" href="/luajava/c-api.html" data-v-7056a291><!--[--><span class="desc" data-v-7056a291>Previous page</span><span class="title" data-v-7056a291>Lua Stack-based C API</span><!--]--></a></div><div class="pager" data-v-7056a291><a class="VPLink link pager-link next" href="/luajava/conversions.html" data-v-7056a291><!--[--><span class="desc" data-v-7056a291>Next page</span><span class="title" data-v-7056a291>Type Conversions</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api.md\":\"mLsfca0G\",\"c-api.md\":\"BgA7SrDI\",\"console.md\":\"_0J8YXjn\",\"conversions.md\":\"DE_Xs8gV\",\"examples_awt.md\":\"EJ_rhPPH\",\"examples_compat.md\":\"BUIu6_0F\",\"examples_hello-world-mod.md\":\"Br8Cfrv2\",\"examples_hello-world.md\":\"3rgn_xVb\",\"examples_modules.md\":\"BfLZHev2\",\"getting-started.md\":\"CpYSoRBW\",\"glibc.md\":\"CFyYElN9\",\"index.md\":\"5Auy9XT6\",\"java.md\":\"DMNq9hsT\",\"jpms.md\":\"BhUQF7Ob\",\"jsr223.md\":\"WGcTtjOs\",\"proxy.md\":\"BYj9woHZ\",\"public_javadoc_legal_jquery.md\":\"B-Etp0wA\",\"public_javadoc_legal_jqueryui.md\":\"Bhi1-Tf8\",\"public_javadoc_legal_jszip.md\":\"BzuVguhs\",\"public_javadoc_legal_pako.md\":\"BsJnZCR_\",\"rtld.md\":\"DNPulq7f\",\"threadsafety.md\":\"Dc5nMiR2\",\"troubleshooting.md\":\"DFxlCfkQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"LuaJava\",\"description\":\"Lua for Java\",\"base\":\"/luajava/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/lua-java.svg\",\"lastUpdated\":{},\"editLink\":{\"pattern\":\"https://github.com/gudzpoz/luajava/blob/main/docs/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/gudzpoz/luajava\"}],\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Javadoc\",\"link\":\"/javadoc/index.html\",\"target\":\"_self\"},{\"text\":\"Lua\",\"link\":\"https://www.lua.org\"},{\"text\":\"LuaJIT\",\"link\":\"https://luajit.org/luajit.html\"}],\"outline\":3,\"sidebar\":[{\"text\":\"Introduction\",\"items\":[{\"text\":\"What is LuaJava?\",\"link\":\"/index.md\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started.md\"},{\"text\":\"Interactive Console\",\"link\":\"/console.md\"},{\"text\":\"JSR 223\",\"link\":\"/jsr223.md\"},{\"text\":\"Java 9 Platform Module System\",\"link\":\"/jpms.md\"}]},{\"text\":\"Java API\",\"items\":[{\"text\":\"Java API\",\"link\":\"/java.md\"},{\"text\":\"Lua Stack-based C API\",\"link\":\"/c-api.md\"}]},{\"text\":\"Lua API\",\"items\":[{\"text\":\"Lua API\",\"link\":\"/api.md\"},{\"text\":\"Type Conversions\",\"link\":\"/conversions.md\"},{\"text\":\"Proxy Caveats\",\"link\":\"/proxy.md\"},{\"text\":\"Thread Safety\",\"link\":\"/threadsafety.md\"}]},{\"text\":\"Examples\",\"items\":[{\"text\":\"LuaJava API Compatibility\",\"link\":\"/examples/compat.md\"},{\"text\":\"Hello World\",\"link\":\"/examples/hello-world.md\"},{\"text\":\"Advanced Hello World\",\"link\":\"/examples/hello-world-mod.md\"},{\"text\":\"AWT Example\",\"link\":\"/examples/awt.md\"},{\"text\":\"Java-Side Modules\",\"link\":\"/examples/modules.md\"}]},{\"text\":\"Troubleshooting\",\"items\":[{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting.md\"},{\"text\":\"Using Binary Lua Libraries\",\"link\":\"/rtld.md\"},{\"text\":\"GNU C Library (glibc) Compatibility\",\"link\":\"/glibc.md\"}]}],\"externalLinkIcon\":true},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>