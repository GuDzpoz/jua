import{_ as l,o as h,c as p,j as i,a as s,I as n,w as t,a5 as a,D as r}from"./chunks/framework.SYT71_kc.js";const vs=JSON.parse('{"title":"Lua API","description":"","frontmatter":{},"headers":[],"relativePath":"api.md","filePath":"api.md","lastUpdated":1724853561000}'),d={name:"api.md"},o=a('<h1 id="lua-api" tabindex="-1">Lua API <a class="header-anchor" href="#lua-api" aria-label="Permalink to &quot;Lua API&quot;">​</a></h1><h2 id="extra-lua-types" tabindex="-1">Extra Lua Types <a class="header-anchor" href="#extra-lua-types" aria-label="Permalink to &quot;Extra Lua Types&quot;">​</a></h2><p>We provide three extra <code>userdata</code> types that correspond to three Java concepts. We use their abbreviations in the following documentation.</p><table tabindex="0"><thead><tr><th></th><th style="text-align:center;"><a href="#jclass-type">Java classes</a></th><th style="text-align:center;"><a href="#jobject-type">Java objects</a></th><th style="text-align:left;"><a href="#jarray-type">Java arrays</a></th></tr></thead><tbody><tr><td>Abbreviation</td><td style="text-align:center;"><a href="#jclass-type"><code>jclass</code></a></td><td style="text-align:center;"><a href="#jobject-type"><code>jobject</code></a></td><td style="text-align:left;"><a href="#jarray-type"><code>jarray</code></a></td></tr></tbody></table>',4),k={id:"jclass-type",tabindex:"-1"},c=i("code",null,"jclass",-1),E=i("a",{class:"header-anchor",href:"#jclass-type","aria-label":'Permalink to "`jclass` <Badge>type</Badge>"'},"​",-1),g=a(`<p>For a <code>jclass</code> <code>clazz</code>:</p><ul><li><code>clazz.memberVar</code> performs the following in sequence: <ol><li>It looks for a field named <code>memberVar</code>. It returns the public static member if it finds it. <ul><li>If you have an inner class also named <code>memberVar</code>, you will have to manually <code>java.import</code> it.</li></ul></li><li>It then looks for an inner class named <code>memberVar</code>, and returns that if it is available. <ul><li>If you have a method also named <code>memberVar</code>, you need to use <code>java.method</code> to look that up.</li></ul></li><li>Otherwise, it prepares for a method call. See <code>clazz:memberMethod(...)</code> below.</li></ol></li><li><code>clazz.memberVar = value</code> assigns to the public static member. If exceptions occur, a Lua error is generated.</li><li><code>clazz:memberMethod(...)</code> calls the public static member method <code>memberMethod</code>. See <a href="#proxied-method-calls">Proxied Method Calls</a> for more info.</li><li><code>clazz(...)</code>: <ul><li>For an interface, this expects a table as the parameter and creates a proxy for it. See <a href="#proxy-jclass-table-function"><code>java.proxy</code></a>.</li><li>Otherwise, it calls the corresponding constructor. See <a href="#new-jclass-function"><code>java.new</code></a>.</li></ul></li><li><code>clazz.class</code> returns a <code>jobject</code>, wrapping an instance of <code>java.lang.Class&lt;clazz&gt;</code>.</li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Integer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Accessing a static member</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calling a static method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1024&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Construct an instance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1024&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Get a Class&lt;Integer&gt; instance</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Don&#39;t confuse <code>jclass</code> with an instance of <code>java.lang.Class&lt;?&gt;</code>. The former one corresponds to Java classes, i.e., <code>java.lang.String</code> in Java. The latter one is just a <code>jobject</code>, i.e., <code>java.lang.String.class</code> in Java.</p></div>`,4),u={id:"jobject-type",tabindex:"-1"},y=i("code",null,"jobject",-1),m=i("a",{class:"header-anchor",href:"#jobject-type","aria-label":'Permalink to "`jobject` <Badge>type</badge>"'},"​",-1),b=a(`<p>For a <code>jobject</code> <code>object</code>:</p><ul><li><code>object.memberVar</code> returns the public member named <code>memberVar</code>.</li><li><code>object.memberVar = value</code> assigns to the public static member. If exceptions occur, a Lua error is generated.</li><li><code>object:memberMethod(...)</code> calls the public member method <code>memberMethod</code>. See <a href="#proxied-method-calls">Proxied Method Calls</a> for more info.</li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Integer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Integer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calling a method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,3),F={id:"jarray-type",tabindex:"-1"},C=i("code",null,"jarray",-1),v=i("a",{class:"header-anchor",href:"#jarray-type","aria-label":'Permalink to "`jarray` <Badge>type</Badge>"'},"​",-1),_=a('<p>For a <code>jarray</code> <code>array</code>:</p><ul><li><code>array[i]</code> returns <code>array[i - 1]</code>. Unlike Lua tables, we raise Lua errors if the index goes out of bounds.</li><li><code>array[i] = value</code> assigns to <code>array[i - 1]</code>. If exceptions occur, a Lua error is generated.</li><li><code>array:memberMethod(...)</code> calls the public member method <code>memberMethod</code> (of <code>java.lang.Object</code> of course), for example, <code>array:getClass()</code>.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Lua tables usually start the index from 1, while Java arrays from 0.</p></div>',3),f={id:"java-module",tabindex:"-1"},j=i("code",null,"java",-1),B=i("a",{class:"header-anchor",href:"#java-module","aria-label":'Permalink to "`java` <Badge>module</Badge>"'},"​",-1),A=a('<table tabindex="0"><thead><tr><th>Functions</th><th>Signature</th><th>Returns</th><th>Description</th></tr></thead><tbody><tr><td><strong><code>array</code></strong></td><td><code>(jclass, dim1, ...)</code></td><td><code>jarray</code></td><td>Create an array with specified dimensions</td></tr><tr><td><strong><code>caught</code></strong></td><td><code>()</code></td><td><code>jobject</code></td><td>Return the latest captured Java <code>Throwable</code></td></tr><tr><td><strong><code>detach</code></strong></td><td><code>(thread)</code></td><td><code>nil</code></td><td>Detach the sub-thread from registry to allow for GC</td></tr><tr><td><strong><code>import</code></strong></td><td><code>(string)</code></td><td><code>jclass | table</code></td><td>Import a Java class or package</td></tr><tr><td><strong><code>loadlib</code></strong></td><td><code>(string, string)</code></td><td><code>function</code></td><td>Load a Java method, similar to <code>package.loadlib</code></td></tr><tr><td><strong><code>luaify</code></strong></td><td><code>(jobject)</code></td><td><code>any</code></td><td>Convert an object to Lua types if possible</td></tr><tr><td><strong><code>method</code></strong></td><td><code>(jobject, string, string)</code></td><td><code>function</code></td><td>Find a method</td></tr><tr><td><strong><code>new</code></strong></td><td><code>(jclass, ...)</code></td><td><code>jobject</code></td><td>Call the constructor of the given Java type</td></tr><tr><td><strong><code>proxy</code></strong></td><td><code>(string, ..., table)</code></td><td><code>jobject</code></td><td>Create an object with all calls proxied to a Lua table</td></tr><tr><td><strong><code>unwrap</code></strong></td><td><code>(jobject)</code></td><td><code>table</code></td><td>Return the backing table of a proxy object</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">There&#39;s more!</p><p>Actually, if you load the built-in <code>package</code> library (either by <code>Lua#openLibraries()</code> or <code>Lua#openLibrary(&quot;package&quot;)</code>), you can use the Lua <code>require</code> functions to load Java side things.</p><p>See <a href="./examples/modules.html">Java-Side Modules</a> for a brief introduction.</p></div>',2),D={id:"array-jclass-dim1-function",tabindex:"-1"},T=i("code",null,"array (jclass, dim1, ...)",-1),x=i("a",{class:"header-anchor",href:"#array-jclass-dim1-function","aria-label":'Permalink to "`array (jclass, dim1, ...)` <Badge>function</Badge>"'},"​",-1),w=a(`<p>Creates a Java array.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass</code>: (<em><strong>jclass</strong></em> | <em><strong>jobject</strong></em>) The component type. One may pass a <code>jclass</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>dim1</code>: (<em><strong>number</strong></em>) The size of the first dimension.</p></li><li><p><code>dim2</code>: (optional) (<em><strong>number</strong></em>) The size of the second dimension.</p></li><li><p><code>dimN</code>: (optional) (<em><strong>number</strong></em>) The size of the N-th dimension.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jarray</strong></em>) <code>new &quot;jclass&quot;[dim1][dim2]...[dimN]</code></li></ul></li><li><p>Generates a Lua error if types mismatch or some dimensions are negative.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">int </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(int, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">arr[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,3),I={id:"caught-function",tabindex:"-1"},S=i("code",null,"caught ()",-1),L=i("a",{class:"header-anchor",href:"#caught-function","aria-label":'Permalink to "`caught ()` <Badge>function</Badge>"'},"​",-1),P=a("<p>Return the latest captured Java <code>java.lang.Throwable</code> during a Java method call.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><em><strong>none</strong></em></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>jobject</strong></em>) If some recent Java method call threw a <code>java.lang.Throwable</code>.</p></li><li><p>(<em><strong>nil</strong></em>) No <code>Throwable</code> was thrown, or they were cleared.</p></li></ul></li></ul>",2),N={id:"detach-thread-function",tabindex:"-1"},J=i("code",null,"detach (thread)",-1),V=i("a",{class:"header-anchor",href:"#detach-thread-function","aria-label":'Permalink to "`detach (thread)` <Badge>function</Badge>"'},"​",-1),M=a('<p>Detach the sub-thread from registry to allow for GC.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><em><strong>thread</strong></em> The thread (e.g., a return value of <code>coroutine.create</code>)</li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>nil</strong></em>)</li></ul></li><li><p>Generates a Lua error if the thread is a main thread.</p></li></ul><div class="danger custom-block"><p class="custom-block-title">Check before detaching</p><ol><li>Most often, you only want to use <code>java.detach</code> on threads created on the Lua side.</li><li>You need to ensure that proxies created on that thread is no longer used.</li><li>If you are not creating tons of sub-threads, you can worry less about GC by letting <code>mainThread#close</code> handle it all instead of manually <code>detach</code>ing.</li></ol></div><details class="details custom-block"><summary>Thread interface explained</summary><p>In LuaJava, an <code>AbstractLua</code> instance just wraps around a <code>lua_State *</code>. We ensure that one <code>lua_State *</code> maps to no more than one <code>AbstractLua</code> instance by assigning each state an ID when:</p><ol><li>a main state is created;</li><li>or when a sub-thread is created on the Java side (with <code>Lua#newThread</code>);</li><li>or when a sub-thread, created on the Lua side (with <code>coroutine.create</code>), eventually requests for an ID if it finds it necessary.</li></ol><p>IDs are stored both on:</p><ul><li>the Java side: IDs are stored in <code>AbstractLua</code> instances.</li><li>and the Lua side: IDs are stored in the table at <code>LUA_REGISTRYINDEX</code>, <em>with the thread itself as the key</em>.</li></ul><p>However, since we keep references to the thread in the <code>LUA_REGISTRYINDEX</code>, it prevents the thread from garbage collection (which is intentional though, as you need threads alive for proxies).</p><p>If you are sure that neither the Java side (proxies, Java API, etc.) nor the Lua side uses the thread anymore, you may manually call <code>java.detach</code> or <code>Lua#close</code> to free the thread from the global registry.</p></details>',4),R={id:"import-name-function",tabindex:"-1"},q=i("code",null,"import (name)",-1),z=i("a",{class:"header-anchor",href:"#import-name-function","aria-label":'Permalink to "`import (name)` <Badge>function</Badge>"'},"​",-1),W=a(`<p>Import a Java class or package.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>name</code>: (<em><strong>string</strong></em>) Either of the following <ul><li><p>The full name, including the package part, of the class.</p></li><li><p>Any string, appended with possibly multiple <code>.*</code>.</p></li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>jclass</strong></em>) If <code>name</code> is the name of a class, return a <code>jclass</code> of the class.</p></li><li><p>(<em><strong>table</strong></em>) If <code>name</code> is a string appended with <code>.*</code>, return a Lua table, which looks up classes directly under a package or inner classes inside a class when indexed. See the following example for details.</p></li></ul></li><li><p>Generates a Lua error if class not found.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lang </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lang.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;android.R.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.*.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(j.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Both works</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(j.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.System&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>`,3),G={id:"loadlib-classname-method-function",tabindex:"-1"},O=i("code",null,"loadlib (classname, method)",-1),Y=i("a",{class:"header-anchor",href:"#loadlib-classname-method-function","aria-label":'Permalink to "`loadlib (classname, method)` <Badge>function</Badge>"'},"​",-1),U=a(`<p>This function provides similar functionalities to Lua&#39;s <code>loadlib</code>. It looks for a method <code>static public int yourSuppliedMethodName(Lua L);</code> inside the class, and returns it as a C function.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>classname</code>: (<em><strong>string</strong></em>) The class name.</p></li><li><p><code>method</code>: (<em><strong>string</strong></em>) The method name.</p><ul><li>We expect the method to accept a single <code>Lua</code> parameter and return an integer.</li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li><p>(<em><strong>function</strong></em>) If the method is found, we wrap it up with a C function wrapper and return it.</p></li><li><p>(<em><strong>nil</strong></em>, <em><strong>string</strong></em>) If no valid method is found, we return <code>nil</code> plus a error message. Similar to <code>package.loadlib</code>, we do not generate a Lua error in this case.</p></li></ul></li></ul><p>You might also want to check out <a href="./examples/modules.html">Java-Side Modules</a> to see how we use this function to extend the Lua <code>require</code>.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-rI1CA" id="tab-kiAiuyO" checked><label for="tab-kiAiuyO">Java Library</label><input type="radio" name="group-rI1CA" id="tab-CCNu_5H"><label for="tab-CCNu_5H">Java Side</label><input type="radio" name="group-rI1CA" id="tab-gSAvMLV"><label for="tab-gSAvMLV">Lua Side</label></div><div class="blocks"><div class="language-java vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> party.iroiro.luajava.docs;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> party.iroiro.luajava.Lua;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SuppressWarnings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unused&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JavaSideExampleModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Lua </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getNumber&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Lua L </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Lua51</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    L.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local LuaLib = require(&#39;party.iroiro.luajava.docs.JavaSideExampleModule.open&#39;);&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;assert(1024 == LuaLib.getNumber())&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LuaLibOpen </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">loadlib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;party.iroiro.luajava.docs.JavaSideExampleModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;open&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LuaLibOpen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></div>`,4),H={id:"luaify-jobject-function",tabindex:"-1"},$=i("code",null,"luaify (jobject)",-1),X=i("a",{class:"header-anchor",href:"#luaify-jobject-function","aria-label":'Permalink to "`luaify (jobject)` <Badge>function</Badge>"'},"​",-1),K=a('<p>Converts a Java object into its Lua equivalence. It does a <a href="./conversions.html#java-to-lua"><code>FULL</code> conversion</a>. See <a href="./conversions.html">Type Conversions</a> for more information.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>jobject</code>: (<em><strong>jobject</strong></em>) The object to get converted.</li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>boolean</strong></em> | <em><strong>integer</strong></em> | <em><strong>number</strong></em> | <em><strong>table</strong></em> | <em><strong>jclass</strong></em>) Depending on the Java type of <code>jobject</code>. <ul><li>Notably, it converts <code>Map&lt;?, ?&gt;</code> and <code>Collection&lt;?&gt;</code> to Lua tables, and <code>Class&lt;?&gt;</code> to <code>jclass</code>.</li></ul></li></ul></li></ul>',2),Q={id:"method-jobject-method-signature-function",tabindex:"-1"},Z=i("code",null,"method (jobject, method[, signature])",-1),ss=i("a",{class:"header-anchor",href:"#method-jobject-method-signature-function","aria-label":'Permalink to "`method (jobject, method[, signature])` <Badge>function</Badge>"'},"​",-1),is=a(`<p>Finds a method of the <code>jobject</code> or <code>jclass</code> matching the name and signature. See <a href="#method-resolution">Method Resolution</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jobject</code>: (<em><strong>jobject</strong></em> | <em><strong>jclass</strong></em>) The object.</p></li><li><p><code>method</code>: (<em><strong>string</strong></em>) The method name. Use <code>new</code> to refer to the constructor.</p><p>For proxy object, it is possible to explicitly call the default methods in the interfaces. Use <code>complete.interface.name:methodName</code> to refer to the method. See the examples below.</p></li><li><p><code>signature</code>: (optional) (<em><strong>string</strong></em>) Comma separated argument type list. If not supplied, treated as an empty one.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>function</strong></em>) Never <code>nil</code>. The real method lookup begins after you supply arguments to this returned function.</li></ul></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AtomicInteger </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.concurrent.atomic.AtomicInteger&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Constructor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AtomicInteger, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;new&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">integer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">compareAndSet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(integer, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;compareAndSet&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int,int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compareAndSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compareAndSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  remove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- iter:remove() -- This throws an exception</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>`,3),as={id:"new-jclass-function",tabindex:"-1"},es=i("code",null,"new (jclass, ...)",-1),ns=i("a",{class:"header-anchor",href:"#new-jclass-function","aria-label":'Permalink to "`new (jclass, ...)` <Badge>function</Badge>"'},"​",-1),ts=a(`<p>Call the constructor of the given Java type.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass</code>: (<em><strong>jclass</strong></em> | <em><strong>jobject</strong></em>) The class. One may pass a <code>jclass</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>...</code>: (<em><strong>any</strong></em>) Extra parameters are passed to the constructor. See also <a href="./conversions.html">Type Conversions</a> to find out how we locate a matching method.</p></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The created object.</li></ul></li><li><p>Generates a Lua error if exceptions occur or unable to locate a matching constructor.</p></li></ul><p>Examples:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--         new String   (&quot;This is the content of the String&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String,   </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;This is the content of the String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;This is the content of the String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,4),ls={id:"proxy-jclass-table-function",tabindex:"-1"},hs=i("code",null,"proxy (jclass, ..., table)",-1),ps=i("a",{class:"header-anchor",href:"#proxy-jclass-table-function","aria-label":'Permalink to "`proxy (jclass, ..., table)` <Badge>function</Badge>"'},"​",-1),rs=a(`<p>Creates a Java object implementing the specified interfaces, proxying calls to the underlying Lua table. See also <a href="./proxy.html">Proxy Caveats</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><p><code>jclass1</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The first interface. One may pass a <code>jclass</code> or a <code>string</code> or a <code>jobject</code> of <code>Class&lt;?&gt;</code>.</p></li><li><p><code>jclass2</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The second interface.</p></li><li><p><code>jclassN</code>: (<em><strong>jclass</strong></em> | <em><strong>string</strong></em> | <em><strong>jobject</strong></em>) The N-th interface.</p></li><li><p><code>table</code>: (<em><strong>table</strong></em> | <em><strong>function</strong></em>)</p><ul><li><p>This parameter can be a table implementing the all the methods in the interfaces.</p></li><li><p>Or, if the interfaces sum up to a <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8" target="_blank" rel="noreferrer">functional interface</a> of wider sense (that is, we allow different signatures as long as they share the same name), an intermediate table will be created and back the actual proxy automatically.</p></li></ul></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The created object.</li></ul></li><li><p>Generates a Lua error if exceptions occur or unable to find the interfaces.</p></li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">button </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.awt.Button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Execute&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">actionPerformed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ev)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- do something</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buttonProxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.awt.ActionListener&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addActionListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buttonProxy)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,3),ds={id:"unwrap-jobject-function",tabindex:"-1"},os=i("code",null,"unwrap (jobject)",-1),ks=i("a",{class:"header-anchor",href:"#unwrap-jobject-function","aria-label":'Permalink to "`unwrap (jobject)` <Badge>function</Badge>"'},"​",-1),cs=a(`<p>Return the backing table of a proxy object. See also <a href="./proxy.html">Proxy Caveats</a>.</p><ul><li><p><strong>Parameters:</strong></p><ul><li><code>jobject</code>: (<em><strong>jobject</strong></em>) The proxy object created with <a href="#proxy-jclass-table-function"><code>java.proxy</code></a> or <a href="./javadoc/party/iroiro/luajava/Lua.html#createProxy(java.lang.Class%5B%5D,party.iroiro.luajava.Lua.Conversion)" target="_self"><code>party.iroiro.luajava.Lua#createProxy</code></a></li></ul></li><li><p><strong>Returns:</strong></p><ul><li>(<em><strong>jobject</strong></em>) The backing Lua table of the Lua proxy.</li></ul></li><li><p>Generates a Lua error if the object is not a Lua proxy object, or belongs to another irrelevant Lua state.</p></li></ul><h2 id="proxied-method-calls" tabindex="-1">Proxied Method Calls <a class="header-anchor" href="#proxied-method-calls" aria-label="Permalink to &quot;Proxied Method Calls&quot;">​</a></h2><p>Java allows method overloading, which means we cannot know which method you are calling until you supply the parameters. Method finding and parameter supplying is an integrated (or, as one may call it, atomic) process in Java.</p><p>However, for calls in Lua, the two steps can get separated:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(param1)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- The above is actually:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, param1)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>To proxy calls to Java, we treat all missing fields, such as <code>obj.method</code>, <code>obj.notAField</code>, <code>obj.whatever</code> as a possible method call. The real resolution starts only after you supply the parameters.</p><p>The side effect of this is that a missing field is never <code>nil</code> but always a possible <code>function</code> call, so don&#39;t depend on this.</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jobject.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notAField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;function&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="method-resolution" tabindex="-1">Method resolution <a class="header-anchor" href="#method-resolution" aria-label="Permalink to &quot;Method resolution&quot;">​</a></h3><p>In either case, if no method matches, a Lua error is raised.</p><h4 id="with-jobject-method" tabindex="-1">With <code>jobject:method(...)</code> <a class="header-anchor" href="#with-jobject-method" aria-label="Permalink to &quot;With \`jobject:method(...)\`&quot;">​</a></h4><p>For method resolution, see <a href="./conversions.html#lua-to-java">Type Conversions</a>.</p><p>Since a Lua type maps to different Java types (for example, <code>lua_Number</code> may be mapped to any Java numerical type), we have to iterate through every method to find one matching Lua parameters. For each possible method, we try to convert the values on stack from Lua to Java. If such conversion is possible, the call is then proxied to this method and the remaining methods are never tried.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>By the nature of this procedure, we do not prioritize any of the method.</p><p>For example, if you are calling <code>java.lang.Math.max</code>, which can be <code>Math.max(int, int)</code>, <code>Math.max(double, double)</code>, etc., then nobody knows which will ever get called.</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>We do not support varargs. You will need to combine <code>java.method</code> and <code>java.array</code> to make that happen.</p><p>For <code>Object... object</code> however, things are easier:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.String&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- We automatically convert lua tables into Object[]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&gt;&gt;&gt; %s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39; </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&gt;&gt;&gt; content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h4 id="with-java-method" tabindex="-1">With <code>java.method</code> <a class="header-anchor" href="#with-java-method" aria-label="Permalink to &quot;With \`java.method\`&quot;">​</a></h4><p>To help with precisely calling a specific method, we provide <a href="#method-jobject-method-signature-function"><code>java.method</code></a>, to which you may specify the signature of the method that you intend to call.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Take the above <code>java.lang.Math.max</code> as an example. You may call <code>Math.max(int, int)</code> with the following:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;max&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;int,int&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You may call <code>Math.max(double, double)</code> with the following:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Math </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.lang.Math&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;max&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;double,double&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><p>If you would like to access an overridden default method from a proxy object, you may also use:</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calls the default method</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iter1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- What if we want to access the default method from a overridden one?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iterImpl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hasNext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  remove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- Calls the default method from java.util.Iterator.</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(this, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    -- Equivalent to the following in Java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    --     Iterator.super.remove();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iterImpl)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Calls the implemented \`remove\`, which then calls the default one</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Or explicitly calling \`remove\`</span></span>
<span class="line highlighted"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pcall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() java.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(iter, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;java.util.Iterator:remove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Calling default methods is not available with LuaJ bindings, since the Java reflection does not provide a way to do so. (We use JNI functions to achieve this within binary bindings.)</p></div>`,22);function Es(gs,us,ys,ms,bs,Fs){const e=r("Badge");return h(),p("div",{"data-pagefind-body":!0},[o,i("h3",k,[c,s(),n(e,null,{default:t(()=>[s("type")]),_:1}),s(),E]),g,i("h3",u,[y,s(),n(e,null,{default:t(()=>[s("type")]),_:1}),s(),m]),b,i("h3",F,[C,s(),n(e,null,{default:t(()=>[s("type")]),_:1}),s(),v]),_,i("h2",f,[j,s(),n(e,null,{default:t(()=>[s("module")]),_:1}),s(),B]),A,i("h3",D,[T,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),x]),w,i("h3",I,[S,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),L]),P,i("h3",N,[J,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),V]),M,i("h3",R,[q,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),z]),W,i("h3",G,[O,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),Y]),U,i("h3",H,[$,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),X]),K,i("h3",Q,[Z,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),ss]),is,i("h3",as,[es,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),ns]),ts,i("h3",ls,[hs,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),ps]),rs,i("h3",ds,[os,s(),n(e,null,{default:t(()=>[s("function")]),_:1}),s(),ks]),cs])}const _s=l(d,[["render",Es]]);export{vs as __pageData,_s as default};
